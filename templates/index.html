<!DOCTYPE html>
<html>

<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <link rel='icon' type='image/png' href='static/oRatio.png' />
    <title>{{title}}</title>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@mdi/font@5.x/css/materialdesignicons.min.css">
    <link rel='stylesheet' href='https://cdn.jsdelivr.net/npm/vuetify@3.1.10/dist/vuetify.min.css'>
</head>

<body class='h-100'>
    <div id='app'>
        <v-app id="oRatio">
            <v-app-bar>
                <v-toolbar-title>oRatio</v-toolbar-title>

                <v-tabs v-model="tab" color="deep-purple-accent-4">
                    <v-tab value="timelines"><v-icon>mdi-chart-timeline</v-icon>Timelines</v-tab>
                    <v-tab value="graph"><v-icon>mdi-graph-outline</v-icon>Graph</v-tab>
                </v-tabs>

                <v-spacer></v-spacer>

                <v-btn icon @click="tick">
                    <v-icon>mdi-metronome-tick</v-icon>
                </v-btn>
            </v-app-bar>

            <v-main class="fill-height">
                <v-card>
                    <v-card-text>
                        <v-window v-model="tab">
                            <v-window-item value="timelines" id="timelines">
                            </v-window-item>

                            <v-window-item value="graph" id="graph">
                            </v-window-item>
                        </v-window>
                    </v-card-text>
                </v-card>
            </v-main>
        </v-app>
    </div>

    <script type="importmap">
        { "imports": {
            "d3-array": "https://unpkg.com/d3-array",
            "d3-axis": "https://unpkg.com/d3-axis",
            "d3-color": "https://unpkg.com/d3-color",
            "d3-drag": "https://unpkg.com/d3-drag",
            "d3-force": "https://unpkg.com/d3-force",
            "d3-interpolate": "https://unpkg.com/d3-interpolate",
            "d3-scale": "https://unpkg.com/d3-scale",
            "d3-scale-chromatic": "https://unpkg.com/d3-scale-chromatic",
            "d3-shape": "https://unpkg.com/d3-shape",
            "d3-selection": "https://unpkg.com/d3-selection",
            "d3-zoom": "https://unpkg.com/d3-zoom",
            "o-ratio": "https://unpkg.com/o-ratio"
        } }
    </script>
    <script src="https://unpkg.com/vue"></script>
    <script src='https://cdn.jsdelivr.net/npm/vuetify@3.1.10/dist/vuetify.min.js'></script>

    <script type='module'>
        import { Connection } from 'o-ratio';

        const { createApp } = Vue;
        const { createVuetify } = Vuetify;

        const vuetify = createVuetify();

        const app = createApp({
            data() {
                return {
                    tab: null
                }
            }, methods: {
                tick() {
                    ws.send('tick');
                }
            }
        });
        app.use(vuetify);
        app.mount('#app');

        const connection = new Connection();
        connection.add_solver();
        connection.connect();
        connection.resize(window.innerWidth, window.innerHeight - 80);
    </script>
</body>

</html>